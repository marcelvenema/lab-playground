--- 

- name: Set wait
  ansible.builtin.set_fact:
    wait: false
  when: wait is not defined

- name: Verify variable input
  ansible.builtin.assert:
    that:
      - action is defined and action in actions
    fail_msg: "Please provide 'action' {{ actions }}"
    quiet: true

# -------------------------------------------------------
  # install, uninstall, configure, update
- name: Install
  ansible.builtin.include_tasks: install.yml
  when: action == "install"

- name: Uninstall
  ansible.builtin.include_tasks: uninstall.yml
  when: action == "uninstall"

- name: Configure
  ansible.builtin.include_tasks: configure.yml
  when: action == "configure"

- name: Update
  ansible.builtin.include_tasks: configure.yml
  when: action == "configure"

# -------------------------------------------------------
  # users
- name: Get user
  ansible.builtin.include_tasks: users.yml
  when: action == "get_user"

- name: Create user
  ansible.builtin.include_tasks: users.yml
  when: action == "create_user"

- name: Destroy user
  ansible.builtin.include_tasks: users.yml
  when: action == "destroy_user"

# -------------------------------------------------------
  # repositories
- name: Get repository
  ansible.builtin.include_tasks: repositories.yml
  when: action == "get_repository"

- name: Create repository
  ansible.builtin.include_tasks: repositories.yml
  when: action == "create_repository"

- name: Destroy user
  ansible.builtin.include_tasks: repositories.yml
  when: action == "destroy_repository"

# -------------------------------------------------------
  # artifacts
- name: Import artifacts
  ansible.builtin.include_tasks: artifacts.yml
  when: action == "import_artifacts"

- name: Export artifacts
  ansible.builtin.include_tasks: artifacts.yml
  when: action == "export_artifacts"

- name: Sync artifacts
  ansible.builtin.include_tasks: artifacts.yml
  when: action == "sync_artifacts"
